define(function(){function c(a){this.o(a);this.j(a);this.create();return this.callee}var l=/<script(\s|\S)*?>|<\/script(\s|\S)*?>/g,g=/<script(\s|\S)*?(\s|\S)*?<\/script(\s|\S)*?>/g,m=/(\/\*(\s|\S)*?\*\/)|<!-{2,}(\s|\S)*?-{2,}>|^\/\/.*|(\/\/.*)/g,h=Object.prototype.hasOwnProperty,k=Object.create(null);c.prototype.j=function(a){this.url=a+".dtnc";this.message={};this.scope={m:this.c(),f:this.a()};this.callee={f:this.a()}};c.prototype.o=function(a){null==a&&this.b("syntax",'option\'s prop is required: "url"')};
c.prototype.create=function(){var a=this;this.h(this.url,function(b){var d=b.replace(m,"");b=d.replace(g,"");d=d.match(g);a.scope.s=b;d.forEach(function(e){a.l(e.replace(l,""))({m:a.c(),f:a.a()})})})};c.prototype.l=function(a){return Function("Message",a)};c.prototype.c=function(){return function(a,b){this.message[a]=b.bind(this.scope)}.bind(this)};c.prototype.a=function(){return function(a,b){if(h.call(this.message,a))this.message[a](b);else this.b("error","not found message: "+a)}.bind(this)};c.prototype.h=
function(a,b){if(this.i(a))b(this.g(a));else{var d=this,e=new XMLHttpRequest;e.open("get",a,!0);e.onload=function(f){200===f.target.status?b(f.target.responseText):d.b("error",'Invalid url: "'+a+'" ['+f.target.status+"]")};e.send()}};c.prototype.b=function(a,b){var d="[Dialog] "+b;switch(a){case "error":throw Error(d);case "syntax":throw new SyntaxError(d);}};c.prototype.i=function(a){return h.call(k,a)};c.prototype.g=function(a){return k[a]};return c});