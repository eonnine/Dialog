(function(b){"function"===typeof define&&define.B?define(function(){return b()}):window.Dialog=b()})(function(){function b(a){if(!(this instanceof b))throw new SyntaxError('[Dialog] "new" constructor operator is required');this.A(a);this.u(a);this.create();return this.callee}var l=/<script(\s|\S)*?>|<\/script(\s|\S)*?>/g,h=/<script(\s|\S)*?(\s|\S)*?<\/script(\s|\S)*?>/g,m=/(\/\*(\s|\S)*?\*\/)|<!-{2,}(\s|\S)*?-{2,}>|^\/\/.*|(\/\/.*)/g,k=Object.prototype.hasOwnProperty,g=Object.create(null);b.prototype.u=
function(a){this.url=a;this.a=this.g=null;this.load=function(c){c=c.call(this.scope,this.g);this.a&&this.a.call(this.callee,c)}.bind(this);this.f={load:this.load};this.message={};this.scope={D:this.j(),l:this.c()};this.callee={l:this.c(),h:this.h.bind(this),i:this.i.bind(this)};a={configurable:!1,enumerable:!1,writable:!1};Object.defineProperties(this.scope,{on:a,emit:a});Object.defineProperties(this.f,{load:a})};b.prototype.A=function(a){null==a&&this.b("syntax",'option\'s prop is required: "url"')};
b.prototype.create=function(){var a=this;this.o(this.url,function(c){var d=c.replace(m,"");c=d.replace(h,"");d=d.match(h);a.scope.C=c;d.forEach(function(e){a.v(e.replace(l,""))(a.scope,a.f)})})};b.prototype.v=function(a){return Function("Message","Dialog",a)};b.prototype.j=function(){return function(a,c){this.message[a]=c.bind(this.scope)}.bind(this)};b.prototype.c=function(){return function(a,c){if(k.call(this.message,a))this.message[a](c);else this.b("error","not found message: "+a)}.bind(this)};
b.prototype.i=function(a){this.g=a;return this.callee};b.prototype.h=function(a){this.a=a;return this.callee};b.prototype.o=function(a,c){if(this.s(a))c(this.m(a));else{var d=this,e=new XMLHttpRequest;e.open("get",a,!0);e.onload=function(f){200===f.target.status?(d.w(a,f.target.responseText),c(f.target.responseText)):d.b("error",'Invalid url: "'+a+'" ['+f.target.status+"]")};e.send()}};b.prototype.b=function(a,c){var d="[Dialog] "+c;switch(a){case "error":throw Error(d);case "syntax":throw new SyntaxError(d);
}};b.prototype.s=function(a){return k.call(g,a)};b.prototype.w=function(a,c){g[a]=c};b.prototype.m=function(a){return g[a]};return b});